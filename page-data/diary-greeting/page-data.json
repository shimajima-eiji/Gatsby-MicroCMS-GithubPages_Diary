{"componentChunkName":"component---src-templates-blog-post-js","path":"/diary-greeting","result":{"pageContext":{"post":{"mainId":"diary-greeting","title":"Gatsby+MicroCMS+NetlifyでJAMStackなブログを運営する","childConvertHtml":{"convertedHtml":"<p>どうもです、のむらやです。<br>タイトルのモチベーションで開設して２日で出来ました。<br>実稼働で15時間ぐらい。集中してやればここまで出来るんだなぁ、と感心しているところです。<br>どちらかというと、記事を書くほうがつらい。ネタはあるんだけど何から書こうか悩んでいます。<br>そんな状態で書いているのでこの記事が一番支離滅裂かもしれない。<br>予めお詫びします。<br></p><h2 id=\"hf664f57031\">ブログ遍歴</h2><p>以前までJekyllとかadiaryとか、サービスだとはてブやらnoteやらQiitaなど、もちろんWordPressとかも使っていたんですが、どれもしっくり来なくて途中でポイッとやってきた経緯があります。<br>格安サーバーを求めて稼働したら、案の定サービスが終了して家なき子になってしまったんですよね。<br>そこそこドメインパワーもあったので使おうと思ったんですが、お名前.comさんは一年経つとドメイン使用量がべらぼうに上がることも多いんで、基本的に一年で捨てて新しいドメインを取る、という事をやっていくと「最初から取らなかったほうが良くね？」という事に気付いてしまうのです。<br>それで現状があるので、完全無料でエンジニアライクな環境でノウハウ蓄積したいなと思いまして、JAMstackにたどり着きました。<br></p><h2 id=\"h80cc118e47\">私のことを少しだけ</h2><p>別の記事で細かい話を書く予定ですが、元々はアフィリエイトもやっている現役エンジニアのIT講師という結構珍しい仕事をしているので、色々な社会のしがらみに縛られずに話せる場所がなかなか限られています。<br>従って、本当に有益な情報（流出すると商売敵など、不特定の業者が困る情報）を発信する場合は予め公開範囲を制限させていただく事になります。<br>最初のうちは小さめに公開範囲を制限しつつ、数が集まれば記事一本全体を制限しつつ、溜まっていけば書籍化（自費）も考えています。<br>資金目的ではないのでクラウドファンディングは見送りましたが、サブスクリプションは興味がありますね。金額とかじゃなくて「お金出してでも買うよ」という人がいてくれると、多少冒険できる心強さがあります。<br>そういう人に向けて書くお話です。コロナ禍の複業に挑戦される方向けに「エンジニアという働き方」「講師という働き方」について語れるのではないかと思っています。<br></p><h2 id=\"hf5dbabf67d\">読者に期待すること</h2><p>Qiita式とかアメブロ式が嫌いなので積極的に広告は出しませんが、メディアには露出しようと思っています。<br>youtubeを始めとした動画配信を頑張ってみたり、動画で話せないやべー話やブログで言えないからメルマガ（LINEとか）にしようとか、そういう計画をなんとなく考えています。<br>話せる内容は全部無料です。お酒飲んで酔った時はここだけの話です。<br><br>そういう「昭和のおっさん感」が伝わる人を対象に書いていくつもりです。<br>若者だからダメとかじゃなく、インターネット老人のおっさんだってまだまだネット社会で頑張っていくぞという事が言いたい。<br>とはいえ、流行りものには疎いので懐古主義にはなります。<br></p><h2 id=\"h1bc47dcf5d\">収益について</h2><p>基本的には広告費と商品紹介、公開制限を掛けている有料記事で考えています。<br>皆さんから（広告費含め）頂いた金額は**誠意として**しっかり公開していきたいですし、何に使ったかもお伝えします。<br>自分の生活費を目的にブログをやるとガッカリしますよ。<br>これは一時期月40万稼いでた事があるから力説しますが、生活のためにブログをやると記事がつまらなくなるんです。<br><br>今度こそ、そうなりたくないので収益は読んでくれているあなたと一緒に、あるいはあなたが楽しめて私も楽しめる「何か」を考えて使いたいなと思っています。<br><br><br>よくあるアフィリエイトブログの「いかがでしょうか」というフレーズが嫌いな私ですが、皆さんのお考えは聞きたいです。<br>次回、あるいは近日どこかでこのブログの使い方やお願いなんかを考えてみようと思います。</p>"},"tags":["ブログについて"],"description":"どうもです、のむらやです。タイトルのモチベーションで開設して２日で出来ました。実稼働で15時間ぐらい。集中してやればここまで出来るんだなぁ、と感心しているところです。どちらかというと、記事を書くほうがつらい。ネタはあるんだけど何から書こうか...","door":null,"prev":null,"next":null,"updatedAt":"2021年01月16日 03時55分35秒","publishedAt":"2021年01月10日 04時54分11秒"},"prev":{"mainId":"tech_howto","title":"【技術分野】ブログの運営方法について","childConvertHtml":{"convertedHtml":"<p>のむらやです、<br>とても良い質問をいただいたので、質問者の許可を得てお話させていただく事にしました。<br><br>まずはこの場を借りて改めまして、この度のご質問と内容の掲載許可をいただきありがとうございます。<br>質問内容が嬉しかったのでのむらや、少々興奮しておりましていつも以上にウザったいテンションになっておりますが、お付き合いいただけるとありがたいです。<br></p><h1 id=\"h4255de75ed\">Q. 質問対応の自動化とかどうやってるんですか？</h1><p>A.LINEの公式アカウントで受けて、個人のLINEやSlackに通知を流してそこから返信しています。<br><br>サイトの技術要件として、</p><ul><li>GatsbyJS(Javascript - React)<ul><li>CSS in JS(emotion)</li></ul></li><li>API(ヘッドレスCMS / microCMS)</li><li>各社ホスティングサービス</li></ul><p>という話をしてきました。<br>が、質問者さんは純粋に「どうやってブログを管理・運営しているのか」が気になったようで、そちらのお話をしたことはなかったな、と気付かされました。<br>つまり、技術要件は気にしないでLINEでのコメント対応をどうやっているとか、公式アカウントからだとメッセージに気付きにくいのでは？等の運営面が気になったそうです。<br><br>私もこの点について取り上げなかったので、この機会に解説します。<br></p><h1 id=\"h4867a1bba6\">質問の対応を自動化する</h1><h2 id=\"hab5be1ed22\">制限事項を確認する</h2><p>まず、静的サイトという都合上コメントフォームは設置できません。<br>やってやれない事はないんですが、コメントの度に裏で重たいビルドを走らせたり、あるいは掲載してよいかどうか判断する仕組みを備えた専用のサービスみたいなものを作るのはどうかなぁ、と懐疑的になっています。<br>ユーザーコミュニケーションはしたいけど、せっかく爆速サイトを作るために静的サイトにしたのに、動的サービスを使うのもおかしな事をしているなぁ、と技術的に気持ち悪く感じたというのもあります。<br>そこで、コメントフォームではなくLINE公式アカウントを使うことで、ユーザーにも記事コメントの返信に気付きやすい仕組みを整える事を優先しました。</p><h2 id=\"h05b1d11a24\">LINE公式アカウントを運用してみて</h2><p>記事を充実させたいコメントを求めるのではなく、ユーザーとコミュニケーションを図る事を目的としたアプローチです。<br>この方法は、必然的に非公開でコメントのやり取りができるので、質問者としても安心できるという面もありますが、それ以上に気軽さがコメントフォームと比べて圧倒的に高いのです。<br><br>とはいえ、公式アカウントは不便です。<br>個人アカウントと違って通知に気付きにくかったり、そもそも通知が鬱陶しいという理由でオフブロックされたりしがちです。<br>コミュニケーションが目的なので、宣伝は比較的しないように心がけていますが、新しい記事を通知してほしくて登録された方もいらっしゃいます。<br>そして、LINEの仕組み上、どの人に通知をしてどの人に通知をしない、という細かな挙動調整が難しかったのです。<br><br>これを実現可能にしたのが、LINE MessageAPIです。</p><h2 id=\"h4af45961fe\">LINE MessagingAPIでできること</h2><p>LINE公式アカウントに何かしらのメッセージを受けたら、Webhookを発信する事ができます。<br>受信先で細かい制御をしてあげればよいので、ここはLINE-GASのノウハウを使ってサクッと実装しました。<br>いったんGASなどAPIサーバーに取り込めば、後はどこへでも渡せます。LINE-GAS-SlackとかLINE-GAS-LINE(個人)につなぎ、コメントがあった事を手元で確認できるようにしました。<br><br>また、送信時点については、予め通知ONにするかどうかをGoogleスプレッドシートなどで管理しておき、必要であれば発信するようにします。<br>具体的には、通知をするユーザーとのリプライトークンを持っておき、何かメッセージを発信したい場合はGASなどから送信すればよいのです。<br>今回の場合、microCMSで更新した情報をユーザーに通知したいので、microCMSのWebhookにGASを入れて、GASからLINEBOTに情報を渡してメッセージを送信するようにしています。<br>なお、ユーザーに最新記事の通知をONにするかどうかはLIFFとかを使うと簡単に設定できます。設定値をGASで受け取ってスプレッドシートに書けばよいです。<br><br>ちょっと設計上の話が多くて混乱しますが、図にすれば簡単です。<br>（後日書きます）<br></p><h2 id=\"h4a88b00160\">技術要件</h2><h3 id=\"h4db3ec6501\">設計</h3><ul><li>LINE BOT(ノンプログラミング)</li><li>GAS</li><li>Slack(ノンプログラミング)</li></ul><p>GASの部分の管理が大変です。<br>システム全体のコントローラーとして、また各部分のインターフェースになっているので、何をやっているのかをしっかり管理する必要があります。<br>ファイルでいうと</p><ul><li>メッセージ受信の通知と転送</li><li>通知のON／OFF制御</li><li>新着記事の送信制御</li></ul><p>送信管理はスプレッドシートでやっているので、ここだけはまだ救いがあります。</p><h3 id=\"h9576599775\">サービス一覧</h3><ul><li>LINEBOT</li><li>LINE MessageAPI</li><li>Google Apps Scripts(GAS)　</li><li>Googleスプレッドシート</li><li>Slack</li><li>LINE(個人)</li></ul><h1 id=\"h85a62dd0d7\">総括</h1><p>技術要件は大した事はないのですが、使っているサービスがとにかく多いので設計が難しいです。<br>設計さえしっかり把握できれば、実装は大したことがないので、ちょっとGASを勉強したら簡単に実装できると思います。</p>"},"tags":["サービス","ブログについて","プログラミング"],"description":"のむらやです、とても良い質問をいただいたので、質問者の許可を得てお話させていただく事にしました。まずはこの場を借りて改めまして、この度のご質問と内容の掲載許可をいただきありがとうございます。質問内容が嬉しかったのでのむらや、少々興奮しており...","door":null,"prev":null,"next":null,"updatedAt":"2021年01月25日 13時19分04秒","publishedAt":"2021年01月25日 13時19分04秒"},"next":{"mainId":"diary-information","title":"【ご案内】本ブログの見方・使い方","childConvertHtml":{"convertedHtml":"<p>のむらやです。<br>せっかくエンジニアが運営するブログなので、ただ単純に情報を提供する以外に「訪れる楽しみ」のようなものを考えたいなと思っています。<br>インターネット老人おじさんは素人ながらエンターテイナーでもあると自負しているのです。<br></p><h2 id=\"h176349f770\">今出来ている機能</h2><p>過去に対応した事をまとめていきます。<br>項目が多くなりそうなので、更新履歴専用のページを用意するかもしれません。<br></p><h2 id=\"h99eea56ca2\">これからやりたいこと</h2><p>最新版（草案）は[Github Issues](https://github.com/shimajima-eiji/microcms-gatsby/issues)を参照していただくとして、まずはブログとしての最低限の機能から充実させていこうと考えています。<br></p><ul><li>お仕事依頼・お打ち合わせの相談のためのカレンダーフォーム</li><li>匿名・非公開のコメントフォーム（このブログは静的サイトジェネレーターで作っているので、WordPressのようなノリでコメントフォームを作れません）</li><li>目次</li><li>国際化（英語）</li><li>SNS投稿のテンプレートを充実</li><li>ブログ内検索（これもWordPressの感覚で作れません）</li></ul><p><br>将来的にやりたい事はまだまだありますが、優先度が高いのはこの辺りです。<br></p>"},"tags":["ブログについて"],"description":"のむらやです。せっかくエンジニアが運営するブログなので、ただ単純に情報を提供する以外に「訪れる楽しみ」のようなものを考えたいなと思っています。インターネット老人おじさんは素人ながらエンターテイナーでもあると自負しているのです。今出来ている機...","door":null,"prev":null,"next":null,"updatedAt":"2021年01月16日 04時21分20秒","publishedAt":"2021年01月10日 04時55分33秒"},"site":{"title":"インターネット老人おぢさん","siteUrl":"https://speedtest-netlify.netlify.app"}}},"staticQueryHashes":["3156519155","370162261"]}